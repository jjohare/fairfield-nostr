# DEPRECATED: This workflow is deprecated in favor of deploy-relay-gcp.yml
# The project has migrated from Cloudflare Workers to GCP Cloud Run
# This file is kept for historical reference only
# To deploy the Nostr relay, use deploy-relay-gcp.yml workflow

name: '[DEPRECATED] Deploy Nosflare Relay to Cloudflare Workers'

on:
  workflow_dispatch:
    inputs:
      confirm_deprecated:
        description: 'This workflow is deprecated. Use deploy-relay-gcp.yml instead'
        required: true
        default: 'false'
        type: boolean

env:
  NODE_VERSION: '20'
  WORKING_DIRECTORY: nosflare

jobs:
  deprecation-notice:
    name: Workflow Deprecated
    runs-on: ubuntu-latest
    steps:
      - name: Show deprecation notice
        run: |
          echo "::error::This workflow is DEPRECATED and should not be used"
          echo "::error::The project has migrated from Cloudflare Workers to GCP Cloud Run"
          echo "::error::Please use the deploy-relay-gcp.yml workflow instead"
          echo ""
          echo "## ⚠️ WORKFLOW DEPRECATED" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "This workflow deploys to Cloudflare Workers, which is no longer supported." >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### Migration to GCP" >> $GITHUB_STEP_SUMMARY
          echo "- Use **.github/workflows/deploy-relay-gcp.yml** for relay deployment" >> $GITHUB_STEP_SUMMARY
          echo "- Deployment target: **GCP Cloud Run**" >> $GITHUB_STEP_SUMMARY
          echo "- Required secrets: GCP_PROJECT_ID, GCP_SA_KEY, GCP_REGION" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "This file is kept for historical reference only." >> $GITHUB_STEP_SUMMARY
          exit 1
